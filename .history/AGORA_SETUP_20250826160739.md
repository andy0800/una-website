# üöÄ AGORA.IO SETUP GUIDE - UNA INSTITUTE LIVESTREAM

## üìã OVERVIEW

This guide explains how to set up Agora.io WebRTC service for the UNA Institute livestream system. Agora.io provides enterprise-grade WebRTC technology that replaces the broken custom WebRTC implementation.

## üîë STEP 1: GET AGORA.IO ACCOUNT

1. **Visit**: [https://www.agora.io/](https://www.agora.io/)
2. **Sign Up**: Create a free account
3. **Create Project**: Create a new project for UNA Institute
4. **Get Credentials**: Note down your App ID and App Certificate

## ‚öôÔ∏è STEP 2: CONFIGURE ENVIRONMENT VARIABLES

Add these to your `.env` file:

```bash
# Agora.io Configuration
AGORA_APP_ID=your_actual_app_id_here
AGORA_APP_CERTIFICATE=your_actual_app_certificate_here
```

## üîß STEP 3: UPDATE CONFIGURATION FILES

### Admin Dashboard (`frontend/admin/js/dashboard-new.js`)
```javascript
const AGORA_CONFIG = {
  appId: 'your_actual_app_id_here', // Replace with your real App ID
  channel: 'una-institute-live',
  token: null, // Will be generated server-side
  uid: Math.floor(Math.random() * 100000)
};
```

### User Livestream (`frontend/js/livestream-new.js`)
```javascript
const AGORA_CONFIG = {
  appId: 'your_actual_app_id_here', // Replace with your real App ID
  channel: 'una-institute-live',
  token: null, // Will be generated server-side
  uid: Math.floor(Math.random() * 100000)
};
```

### Arabic User Livestream (`frontend/js/livestream-ar-new.js`)
```javascript
const AGORA_CONFIG = {
  appId: 'your_actual_app_id_here', // Replace with your real App ID
  channel: 'una-institute-live',
  token: null, // Will be generated server-side
  uid: Math.floor(Math.random() * 100000)
};
```

## üöÄ STEP 4: REPLACE OLD FILES

1. **Backup old files**:
   ```bash
   cp frontend/admin/js/dashboard.js frontend/admin/js/dashboard.js.old
   cp frontend/js/livestream.js frontend/js/livestream.js.old
   cp frontend/js/livestream-ar.js frontend/js/livestream-ar.js.old
   ```

2. **Replace with new files**:
   ```bash
   cp frontend/admin/js/dashboard-new.js frontend/admin/js/dashboard.js
   cp frontend/js/livestream-new.js frontend/js/livestream.js
   cp frontend/js/livestream-ar-new.js frontend/js/livestream-ar.js
   ```

## üß™ STEP 5: TEST THE SYSTEM

1. **Start the server**: `npm start`
2. **Open admin dashboard**: Navigate to `/admin`
3. **Start streaming**: Click "Start Stream" button
4. **Open user livestream**: Navigate to `/en/livestream.html`
5. **Test microphone**: Request microphone access

## ‚úÖ FEATURES INCLUDED

### Admin Dashboard
- ‚úÖ **Camera & Microphone Streaming**
- ‚úÖ **Screen Sharing**
- ‚úÖ **Stream Recording**
- ‚úÖ **User Audio Management**
- ‚úÖ **Real-time Chat**

### User Experience
- ‚úÖ **Live Video Viewing**
- ‚úÖ **Microphone Access**
- ‚úÖ **Real-time Chat**
- ‚úÖ **Mobile Compatibility**
- ‚úÖ **Browser Compatibility**

## üîí SECURITY FEATURES

- **Token-based Authentication**: Secure access to streams
- **Role-based Access**: Host vs Audience permissions
- **Encryption Support**: AES encryption available
- **Channel Isolation**: Separate channels for different streams

## üì± MOBILE OPTIMIZATION

- **Mobile WebRTC**: Optimized for mobile devices
- **Audio Profiles**: Configurable audio quality
- **Video Encoding**: Adaptive bitrate and resolution
- **Touch Controls**: Mobile-friendly interface

## üö® TROUBLESHOOTING

### Common Issues

1. **"AgoraRTC is not defined"**
   - Check if Agora.io script is loaded
   - Verify script URL in HTML files

2. **"Failed to initialize Agora client"**
   - Verify App ID is correct
   - Check internet connection
   - Ensure Agora.io service is available

3. **"Microphone access denied"**
   - Check browser permissions
   - Ensure HTTPS or localhost
   - Try different browser

4. **"Stream not connecting"**
   - Verify channel name matches
   - Check network connectivity
   - Ensure admin is streaming

### Debug Mode

Enable debug logging by setting in browser console:
```javascript
localStorage.setItem('agora_debug', 'true');
```

## üìû SUPPORT

- **Agora.io Documentation**: [https://docs.agora.io/](https://docs.agora.io/)
- **Agora.io Support**: [https://www.agora.io/support](https://www.agora.io/support)
- **Community Forum**: [https://www.agora.io/community](https://www.agora.io/community)

## üéØ NEXT STEPS

1. **Production Deployment**: Set up production Agora.io account
2. **Custom Branding**: Customize UI for UNA Institute
3. **Analytics**: Implement stream analytics
4. **Recording Storage**: Set up cloud recording storage
5. **Multi-language**: Add more language support

---

**üéâ Congratulations!** Your livestream system is now powered by enterprise-grade WebRTC technology from Agora.io.
